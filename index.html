<html>
    <head>
        <title>just test</title>
    </head>
    <body>
        <script type="text/javascript">
            var socket = new WebSocket('ws://localhost:8080/subscribe');
            socket.onerror = function() {
                console.log()
            };
            
            socket.onopen = function() {
                // alert('handshake successfully established. May send data now...');
                socket.send(JSON.stringify({'action': 'subscribe', 'value': 'testchan'}));
            };
            socket.onmessage = function (evt) {
                //alert("About to receive data");
                var received_msg = evt.data;
                console.log("Message received = "+received_msg);
            };
            socket.onclose = function() {
                console.log('connection closed');
            };
        </script>
    </body>
</html>